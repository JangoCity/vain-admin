{"version":3,"sources":["webpack:///src/views/account/role.vue","webpack:///./src/views/account/role.vue?a438","webpack:///./src/views/account/role.vue"],"names":["role","undefined","callback","fetchData","computed","extends_default","Object","vuex_esm","_this","this","dataList","_this2","resetTemp","row","_this3","_this4","menus","id","rolePermission","_this5","permissionArray","_this6","then","catch","account_role","render","_vm","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","indexOf","expression","attrs","type","icon","on","click","$event","addRole","_v","key","tableKey","staticStyle","width","data","list","element-loading-text","border","fit","highlight-current-row","align","label","scopedSlots","_u","fn","scope","_s","$index","roleKey","description","createTime","size","modifyRole","grantPermission","deleteRole","title","textMap","dialogStatus","visible","dialogFormVisible","center","update:visible","ref","margin-left","rules","model","temp","label-position","label-width","prop","$$v","$set","slot","saveAddRole","saveModifyRole","permissionFormVisible","permissions","show-checkbox","node-key","default-expanded-keys","default-checked-keys","hasPermissions","highlight-current","props","defaultProps","savePermission","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/9.01dddd51852ec7345a69.js","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n      <div class=\"operation-container\">\r\n          <el-button class=\"filter-item\" type='primary' @click=\"addRole()\" icon=\"el-icon-edit\" v-show=\"menus.indexOf('account.role.add')!==-1\">添加</el-button>\r\n      </div>\r\n\r\n    <el-table :key='tableKey' :data='list' v-loading=\"listLoading\" element-loading-text=\"加载中\" border fit highlight-current-row style=\"width:100%;\">\r\n        <el-table-column align=\"center\" width=\"65\" label=\"序号\">\r\n            <template slot-scope=\"scope\">\r\n                <span>{{scope.$index+1}}</span>\r\n            </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"角色名\" width=\"150px\">\r\n            <template slot-scope=\"scope\">\r\n                <span>{{scope.row.name}}</span>\r\n            </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"角色key\" width=\"150px\">\r\n            <template slot-scope=\"scope\">\r\n                <span>{{scope.row.roleKey}}</span>\r\n            </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"描述\" width=\"150px\">\r\n            <template slot-scope=\"scope\">\r\n                <span>{{scope.row.description}}</span>\r\n            </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"创建时间\" width=\"200px\">\r\n            <template slot-scope=\"scope\">\r\n                 <i class=\"el-icon-time\"></i>\r\n                <span>{{scope.row.createTime}}</span>\r\n            </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n                <el-button type=\"primary\" @click='modifyRole(scope.row)' size=\"small\" v-show=\"menus.indexOf('account.role.modify')!==-1\">编辑</el-button>\r\n                <el-button type=\"primary\" @click='grantPermission(scope.row)' size=\"small\" v-show=\"menus.indexOf('account.role.grant')!==-1\">角色权限</el-button>\r\n                <el-button type=\"danger\" @click='deleteRole(scope.row)' size=\"mini\" v-show=\"menus.indexOf('account.role.delete')!==-1\">删除</el-button>\r\n            </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 新建弹窗 -->\r\n  <el-dialog :title=\"textMap[dialogStatus]\" :visible.sync=\"dialogFormVisible\" center width=\"25%\">\r\n      <el-form :rules=\"rules\" ref=\"dataForm\" :model=\"temp\" label-position=\"left\" label-width=\"90px\" style='width:80%;margin-left:8%;'>\r\n          <el-form-item label=\"角色名\" prop=\"name\">\r\n              <el-input v-model=\"temp.name\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"角色key\" prop=\"roleKey\">\r\n              <el-input v-model=\"temp.roleKey\"></el-input>\r\n           </el-form-item>\r\n          <el-form-item label=\"角色描述\">\r\n              <el-input v-model=\"temp.description\"></el-input>\r\n           </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取消</el-button>\r\n          <el-button v-if=\"dialogStatus=='create'\" type=\"primary\" @click=\"saveAddRole()\">添加</el-button>\r\n          <el-button v-else type=\"primary\" @click=\"saveModifyRole()\">更新</el-button>\r\n      </div>\r\n  </el-dialog>\r\n\r\n    <!-- 分配权限 -->\r\n    <el-dialog :title=\"textMap[dialogStatus]\" :visible.sync=\"permissionFormVisible\" center width=\"25%\">\r\n        <el-form :rules=\"rules\" ref=\"dataForm\" :model=\"temp\" label-position=\"left\" label-width=\"90px\" style='width:250px;margin-left:50px;'>\r\n            <el-tree\r\n              :data=\"permissions\"\r\n              show-checkbox\r\n              node-key=\"id\"\r\n              :default-expanded-keys=\"[110000,120000,130000]\"\r\n              :default-checked-keys=\"hasPermissions\"\r\n              ref=\"tree\"\r\n              highlight-current\r\n              :props=\"defaultProps\">\r\n            </el-tree>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"permissionFormVisible = false\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"savePermission()\">分配</el-button>\r\n        </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n\r\n\r\n\r\n</template>\r\n<script>\r\nimport {\r\n  getRoleList,\r\n  addRole,\r\n  getRole,\r\n  deteleRole,\r\n  modifyRole,\r\n  getMenuList,\r\n  assignRoleMenu\r\n} from '@/api/account'\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  name: 'role',\r\n  data() {\r\n    const roleNameCheck = (rule, value, callback) => {\r\n      if (value === undefined || value.length < 0) {\r\n        callback(new Error('角色名不能为空'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    const roleKeyCheck = (rule, value, callback) => {\r\n      if (value === undefined || value.length < 0) {\r\n        callback(new Error('角色Key不能为空'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      listLoading: true,\r\n      listQuery: {\r\n        name: undefined\r\n      },\r\n      roleList: ['admin', 'normal'],\r\n      rules: {\r\n        name: [{ required: true, trigger: 'blur', validator: roleNameCheck }],\r\n        roleKey: [{ required: true, trigger: 'blur', validator: roleKeyCheck }]\r\n      },\r\n      textMap: {\r\n        create: '新建角色',\r\n        modify: '修改角色',\r\n        permission: '分配权限'\r\n      },\r\n      dialogStatus: '',\r\n      dialogFormVisible: false,\r\n      permissionFormVisible: false,\r\n      temp: {\r\n        id: undefined,\r\n        username: undefined,\r\n        password: undefined\r\n      },\r\n      tableKey: 0,\r\n      list: null,\r\n      permissions: [],\r\n      hasPermissions: undefined,\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'name'\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData()\r\n  },\r\n  computed: {\r\n    ...mapGetters(['menus'])\r\n  },\r\n  methods: {\r\n    fetchData() {\r\n      this.listLoading = true\r\n      getRoleList(this.listQuery).then(response => {\r\n        this.list = response.dataList\r\n        this.listLoading = false\r\n      })\r\n    },\r\n    resetTemp() {\r\n      this.temp = {\r\n        id: undefined,\r\n        username: undefined,\r\n        password: undefined\r\n      }\r\n    },\r\n    saveAddRole() {\r\n      this.$refs.dataForm.validate(valid => {\r\n        if (valid) {\r\n          this.temp.deleted = 0\r\n          addRole(this.temp).then(reponse => {\r\n            this.$message({\r\n              message: '添加角色成功',\r\n              type: 'success'\r\n            })\r\n            this.dialogFormVisible = false\r\n            this.fetchData()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    addRole() {\r\n      this.resetTemp()\r\n      this.dialogStatus = 'create'\r\n      this.dialogFormVisible = true\r\n    },\r\n    modifyRole(row) {\r\n      this.temp = row\r\n      this.dialogStatus = 'modify'\r\n      this.dialogFormVisible = true\r\n    },\r\n    saveModifyRole() {\r\n      this.$refs.dataForm.validate(valid => {\r\n        if (valid) {\r\n          this.temp.deleted = 0\r\n          modifyRole(this.temp).then(reponse => {\r\n            this.$message({\r\n              message: '修改成功',\r\n              type: 'success'\r\n            })\r\n            this.dialogFormVisible = false\r\n            this.fetchData()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    grantPermission(row) {\r\n      this.permissionFormVisible = true\r\n      this.dialogStatus = 'permission'\r\n      this.temp = row\r\n      this.hasPermissions = []\r\n      getMenuList().then(reponse => {\r\n        this.permissions = reponse.dataList\r\n      })\r\n      getRole(row.id).then(response => {\r\n        console.log(response.data.menus)\r\n        const rolePermission = []\r\n        Array.from(response.data.menus).forEach(function(menu) {\r\n          rolePermission.push(menu.id)\r\n        })\r\n        this.hasPermissions = rolePermission\r\n        this.$refs.tree.setCheckedNodes(rolePermission)\r\n      })\r\n      this.defaultProps = {\r\n        children: 'children',\r\n        label: 'name'\r\n      }\r\n    },\r\n    savePermission() {\r\n      const permissionArray = []\r\n      Array.from(this.$refs.tree.getCheckedKeys()).forEach(function(id) {\r\n        permissionArray.push({ id: id, hasPermission: true })\r\n      })\r\n      Array.from(this.$refs.tree.getHalfCheckedKeys()).forEach(function(id) {\r\n        permissionArray.push({ id: id, hasPermission: true })\r\n      })\r\n      this.temp.menus = permissionArray\r\n      assignRoleMenu(this.temp).then(response => {\r\n        this.$message({\r\n          message: '分配权限成功',\r\n          type: 'success'\r\n        })\r\n        this.permissionFormVisible = false\r\n      })\r\n    },\r\n    deleteRole(row) {\r\n      this.$confirm('删除该角色影响对应用户, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'error'\r\n      })\r\n        .then(() => {\r\n          deteleRole({ id: row.id }).then(response => {\r\n            this.$message({\r\n              message: '删除角色成功',\r\n              type: 'success'\r\n            })\r\n            this.fetchData()\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/account/role.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"operation-container\"},[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menus.indexOf('account.role.add')!==-1),expression:\"menus.indexOf('account.role.add')!==-1\"}],staticClass:\"filter-item\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){_vm.addRole()}}},[_vm._v(\"添加\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],key:_vm.tableKey,staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"element-loading-text\":\"加载中\",\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"65\",\"label\":\"序号\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.$index+1))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"角色名\",\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.name))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"角色key\",\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.roleKey))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"描述\",\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.description))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"创建时间\",\"width\":\"200px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-time\"}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(scope.row.createTime))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menus.indexOf('account.role.modify')!==-1),expression:\"menus.indexOf('account.role.modify')!==-1\"}],attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.modifyRole(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menus.indexOf('account.role.grant')!==-1),expression:\"menus.indexOf('account.role.grant')!==-1\"}],attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.grantPermission(scope.row)}}},[_vm._v(\"角色权限\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menus.indexOf('account.role.delete')!==-1),expression:\"menus.indexOf('account.role.delete')!==-1\"}],attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.deleteRole(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.textMap[_vm.dialogStatus],\"visible\":_vm.dialogFormVisible,\"center\":\"\",\"width\":\"25%\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"dataForm\",staticStyle:{\"width\":\"80%\",\"margin-left\":\"8%\"},attrs:{\"rules\":_vm.rules,\"model\":_vm.temp,\"label-position\":\"left\",\"label-width\":\"90px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.temp.name),callback:function ($$v) {_vm.$set(_vm.temp, \"name\", $$v)},expression:\"temp.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色key\",\"prop\":\"roleKey\"}},[_c('el-input',{model:{value:(_vm.temp.roleKey),callback:function ($$v) {_vm.$set(_vm.temp, \"roleKey\", $$v)},expression:\"temp.roleKey\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色描述\"}},[_c('el-input',{model:{value:(_vm.temp.description),callback:function ($$v) {_vm.$set(_vm.temp, \"description\", $$v)},expression:\"temp.description\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),(_vm.dialogStatus=='create')?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.saveAddRole()}}},[_vm._v(\"添加\")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.saveModifyRole()}}},[_vm._v(\"更新\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.textMap[_vm.dialogStatus],\"visible\":_vm.permissionFormVisible,\"center\":\"\",\"width\":\"25%\"},on:{\"update:visible\":function($event){_vm.permissionFormVisible=$event}}},[_c('el-form',{ref:\"dataForm\",staticStyle:{\"width\":\"250px\",\"margin-left\":\"50px\"},attrs:{\"rules\":_vm.rules,\"model\":_vm.temp,\"label-position\":\"left\",\"label-width\":\"90px\"}},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.permissions,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expanded-keys\":[110000,120000,130000],\"default-checked-keys\":_vm.hasPermissions,\"highlight-current\":\"\",\"props\":_vm.defaultProps}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.permissionFormVisible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.savePermission()}}},[_vm._v(\"分配\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-57c887ef\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/account/role.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57c887ef\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./role.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/account/role.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}